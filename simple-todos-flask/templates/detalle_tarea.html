<!-- templates/detalle_tarea.html - Vista detallada de una tarea -->
{% extends "base.html" %}

{% block titulo %}Tarea: {{ tarea.titulo }} - TODOs Flask{% endblock %}

{% block contenido %}
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <!-- Informaci√≥n principal de la tarea -->
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center 
                            {% if tarea.completada %}bg-success text-white{% else %}bg-warning text-dark{% endif %}">
                    <h4 class="mb-0">üìã Detalles de la Tarea</h4>
                    <span class="badge {% if tarea.completada %}bg-light text-success{% else %}bg-dark{% endif %}">
                        #{{ tarea.id }}
                    </span>
                </div>
                
                <div class="card-body">
                    <!-- Estado de la tarea -->
                    <div class="mb-3">
                        <label class="fw-bold text-muted">Estado:</label>
                        <span class="badge fs-6 {% if tarea.completada %}bg-success{% else %}bg-warning text-dark{% endif %}">
                            {% if tarea.completada %}‚úÖ Completada{% else %}‚è≥ Pendiente{% endif %}
                        </span>
                    </div>
                    
                    <!-- T√≠tulo -->
                    <div class="mb-3">
                        <label class="fw-bold text-muted">T√≠tulo:</label>
                        <h5 class="{% if tarea.completada %}text-decoration-line-through text-muted{% endif %}">
                            {{ tarea.titulo }}
                        </h5>
                    </div>
                    
                    <!-- Descripci√≥n -->
                    <div class="mb-3">
                        <label class="fw-bold text-muted">Descripci√≥n:</label>
                        <div class="p-3 bg-light rounded">
                            {% if tarea.descripcion and tarea.descripcion != 'Sin descripci√≥n' %}
                                <p class="mb-0">{{ tarea.descripcion }}</p>
                            {% else %}
                                <p class="mb-0 text-muted fst-italic">No hay descripci√≥n disponible</p>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Fecha de creaci√≥n -->
                    <div class="mb-3">
                        <label class="fw-bold text-muted">Fecha de creaci√≥n:</label>
                        <p class="mb-0">
                            üìÖ {{ tarea.fecha_creacion.split(' ')[0] }} 
                            üïê {{ tarea.fecha_creacion.split(' ')[1] }}
                        </p>
                    </div>
                </div>
                
                <!-- Botones de acci√≥n -->
                <div class="card-footer bg-transparent">
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                        <a href="{{ url_for('mostrar_todos') }}" class="btn btn-secondary">
                            ‚Üê Volver a la Lista
                        </a>
                        
                        <a href="{{ url_for('editar_tarea_form', tarea_id=tarea.id) }}" 
                           class="btn btn-primary">
                            ‚úèÔ∏è Editar
                        </a>
                        
                        <a href="{{ url_for('completar_tarea', tarea_id=tarea.id) }}" 
                           class="btn btn-{% if tarea.completada %}warning{% else %}success{% endif %}">
                            {% if tarea.completada %}
                                ‚Ü©Ô∏è Marcar Pendiente
                            {% else %}
                                ‚úÖ Completar
                            {% endif %}
                        </a>
                        
                        <a href="{{ url_for('eliminar_tarea', tarea_id=tarea.id) }}" 
                           class="btn btn-danger"
                           onclick="return confirm('¬øEst√°s seguro de que quieres eliminar esta tarea?')">
                            üóëÔ∏è Eliminar
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Informaci√≥n adicional -->
            <div class="card mt-3">
                <div class="card-body bg-light">
                    <h6 class="card-title">üìä Informaci√≥n Adicional</h6>
                    <div class="row">
                        <div class="col-6">
                            <small class="text-muted">
                                <strong>ID √∫nico:</strong> {{ tarea.id }}
                            </small>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">
                                <strong>Caracteres en t√≠tulo:</strong> {{ tarea.titulo|length }}
                            </small>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-6">
                            <small class="text-muted">
                                <strong>Estado:</strong> 
                                {% if tarea.completada %}Finalizada{% else %}En progreso{% endif %}
                            </small>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">
                                <strong>Caracteres en descripci√≥n:</strong> 
                                {% if tarea.descripcion and tarea.descripcion != 'Sin descripci√≥n' %}
                                    {{ tarea.descripcion|length }}
                                {% else %}
                                    0
                                {% endif %}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Informaci√≥n t√©cnica -->
    <div class="row justify-content-center mt-4">
        <div class="col-md-8 col-lg-6">
            <div class="alert alert-info">
                <h6 class="alert-heading">üîß Informaci√≥n T√©cnica</h6>
                <p class="mb-0 small">
                    Esta vista muestra una operaci√≥n <strong>READ</strong> individual. 
                    Flask busca la tarea por ID en la lista y muestra todos sus detalles. 
                    Se usan filtros de Jinja2 como <code>|length</code> para mostrar estad√≠sticas.
                </p>
            </div>
        </div>
    </div>
{% endblock %}
